<!doctype html><html lang="en"><head><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"/><title>Webpack App</title><link href="/dist/entry.css?7d6fcbd0008a607eaf9e" rel="stylesheet"/><link href="/dist/entry.min.css?7d6fcbd0008a607eaf9e" rel="stylesheet"/><link href="https://playentry.org/lib/entry-tool/dist/entry-tool.css" rel="stylesheet"/><link href="https://playentry.org/lib/entry-lms/dist/assets/app.css" rel="stylesheet"/></head><body><div id="workspace"></div><script src="../extern/lang/ko.js"></script><script src="https://playentry.org/lib/PreloadJS/lib/preloadjs-0.6.0.min.js"></script><script src="https://playentry.org/lib/EaselJS/lib/easeljs-0.8.0.min.js"></script><script src="https://playentry.org/lib/SoundJS/lib/soundjs-0.6.0.min.js"></script><script src="https://playentry.org/lib/SoundJS/lib/flashaudioplugin-0.6.0.min.js"></script><script src="https://playentry.org/lib/lodash/dist/lodash.min.js"></script><script src="https://playentry.org/lib/jquery/jquery.min.js"></script><script src="https://playentry.org/lib/jquery-ui/ui/minified/jquery-ui.min.js"></script><script src="https://playentry.org/lib/velocity/velocity.min.js"></script><script src="https://playentry.org/lib/codemirror/lib/codemirror.js"></script><script src="https://playentry.org/lib/codemirror/addon/hint/show-hint.js"></script><script src="https://playentry.org/lib/codemirror/addon/lint/lint.js"></script><script src="https://playentry.org/lib/codemirror/addon/selection/active-line.js"></script><script src="https://playentry.org/lib/codemirror/mode/javascript/javascript.js"></script><script src="https://playentry.org/lib/codemirror/addon/hint/javascript-hint.js"></script><script src="https://playentry.org/js/jshint.js"></script><script src="https://playentry.org/lib/fuzzy/lib/fuzzy.js"></script><script src="https://playentry.org/js/ws/python.js"></script><script src="https://playentry.org/lib/entry-js/extern/util/filbert.js"></script><script src="https://playentry.org/lib/entry-js/extern/util/CanvasInput.js"></script><script src="https://playentry.org/lib/entry-js/extern/util/ndgmr.Collision.js"></script><script src="https://playentry.org/lib/entry-js/extern/util/handle.js"></script><script src="https://playentry.org/lib/entry-js/extern/util/bignumber.min.js"></script><script src="https://playentry.org/lib/socket.io-client/socket.io.js"></script><script src="https://unpkg.com/react@18/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script><script src="https://playentry.org/lib/entry-lms/dist/assets/app.js"></script><script src="../extern/util/static.js"></script><script src="https://playentry.org/lib/entry-tool/dist/entry-tool.js"></script><script src="https://playentry.org/lib/entry-paint/dist/static/js/entry-paint.js"></script><script src="https://entry-cdn.pstatic.net/external/sound/sound-editor.js?v=240130-174210"></script><script src="/dist/entry.js?7d6fcbd0008a607eaf9e"></script><script src="/dist/entry.min.js?7d6fcbd0008a607eaf9e"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script><script>function handleUpdate() {
                const file = document.getElementById('litemodule').files[0];
                const name = document.getElementById('litemodulename').value;
                Entry.loadLiteTestModule(file, name);
            }</script><script>window.PUBLIC_PATH_FOR_ENTRYJS = 'lib/entry-js/dist/';
            $(document).ready(function() {
                var initOption = {
                    type: 'workspace',
                    textCodingEnable: false, //파이썬 끄기 
                    sceneEditable:false, //단일 장면으로 사용
                    objectaddable:false, //오브젝트 추가하기 버튼 isShow 여부 
                    soundeditable:true, //소리TAB (현재 지원안하는 서비스)
                };
                Entry.creationChangedEvent = new Entry.Event(window);
                Entry.init(document.getElementById('workspace'), initOption);

                Entry.loadProject();
                window.addEventListener("message", async (event) => {
                console.log('부모 도메인',event.origin)
                if (event.origin === "http://192.168.155.155:5173") {
                    if (event.data.type === "init") {
                        //초기 프로젝트로 로드
                        const blockData = event.data.blockData;
                        console.log(
                            "엔트리: ㅇㅇ 처음 프로젝트 시작이얌",
                            blockData
                        );
                        if(blockData !==null){
                            console.log('불러오기 로드')
                            // Entry.clearProject() 이게 필요한지.. 체크해보기
                            Entry.loadProject(blockData);
                        }else{
                            console.log('찐처음 로드')
                           
                        }

                      
                    }
                    if (event.data.type === "done") {
                        //채점
                        var blockData = Entry.exportProject();
                        console.log("엔트리: 응그래 다했니 니파일 정보 드림",blockData);
                        const captureDiv = document.getElementById('capture')
                        html2canvas(captureDiv).then((canvas)=>{
                            canvas.toBlob(blob=>{
                                window.parent.postMessage(
                            {
                                data: blockData, //jsonData
                                img: blob, //blobData
                            },
                            "http://192.168.155.155:5173"
                        );
                            })
                        })
                       
                    }
                }
            });
                
             
            });</script></body></html>